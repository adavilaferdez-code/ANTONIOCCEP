<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HostelHub Premium</title>
    <link rel="stylesheet" href="style.css?v=999">
    <link rel="stylesheet" href="style_append.css?v=999">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Dynamic Background -->
    <div class="app-background"></div>

    <div class="app-container">

        <!-- Header -->
        <!-- Header Removed -->
        <header class="app-header">
            <div class="brand-centered">
                <img src="logo_antonio.png" alt="Antonio D√°vila" class="main-logo">
                <p style="color:white; font-size:10px; margin-top:5px;">V2.1 (Showroom Ready)</p>
            </div>
            <!-- Showroom Toggle -->
            <button class="showroom-toggle" onclick="toggleShowroom()">
                <i class="fa-solid fa-eye"></i>
            </button>
        </header>

        <!-- Main Content -->
        <main class="app-main">

            <!-- Hero Search -->
            <section class="search-hero commercial-data">
                <div class="search-wrapper">
                    <i class="fa-solid fa-magnifying-glass search-icon"></i>
                    <input type="text" id="searchInput" class="search-input"
                        placeholder="Buscar bar, restaurante, ciudad...">
                </div>
            </section>

            <div class="actions-container">

                <!-- DASHBOARD CARD (Grupos unificados) -->
                <div class="dashboard-card">

                    <!-- 1. Button -->
                    <button class="btn-cerca commercial-data" onclick="searchNearMe()">
                        <i class="fa-solid fa-location-crosshairs"></i> CERCA (100km)
                    </button>

                    <!-- 2. Shortcuts Grid -->
                    <div class="bento-grid">
                        <!-- 1. Productos -->
                        <div class="bento-card commercial-data" onclick="openCatalogWithNote()" style="cursor:pointer;">
                            <i class="fa-solid fa-box-open" style="color: #fbbf24;"></i>
                            <span>Productos</span>
                        </div>

                        <!-- 2. Power BI -->
                        <div class="bento-card sensitive-data"
                            onclick="window.open('https://app.powerbi.com/', '_blank'); return false;">
                            <i class="fa-solid fa-chart-pie" style="color: #f59e0b;"></i>
                            <span>Power BI</span>
                        </div>

                        <!-- 3. Checklist -->
                        <div class="bento-card sensitive-data" onclick="openChecklist()">
                            <i class="fa-solid fa-clipboard-check" style="color: #d946ef;"></i>
                            <span>Checklist</span>
                        </div>

                        <!-- 4. Negociaciones -->
                        <div class="bento-card sensitive-data"
                            onclick="window.open('https://gemini.google.com', '_blank')">
                            <i class="fa-solid fa-handshake" style="color: #10b981;"></i>
                            <span>Negociaci√≥n</span>
                        </div>

                        <!-- 5. Cat√°logo Clientes -->
                        <div class="bento-card commercial-data" onclick="window.open('catalogo_2025.pdf', '_blank')"
                            style="cursor:pointer;">
                            <i class="fa-solid fa-images" style="color: #3b82f6;"></i>
                            <span>Cat√°logo</span>
                        </div>
                    </div>

                    <!-- 3. Distribuidores -->
                    <div class="capsule-btn cap-blue sensitive-data" onclick="openDistribuidoresModal()"
                        style="width: 100%; justify-content: center; margin-top: 5px;">
                        <i class="fa-solid fa-truck-fast"></i> DISTRIBUIDORES
                    </div>

                </div>
            </div>

            <!-- 4. HERO IMAGES (RESTORED) -->
            <div class="hero-grid">
                <!-- FOCOS -->
                <div class="hero-card commercial-data" onclick="openFocusModal()">
                    <img src="focos_dashboard.jpg" class="hero-bg" alt="Focos">
                    <div class="hero-overlay">
                        <div class="hero-title"><i class="fa-solid fa-star"></i> FOCOS ENERO</div>
                        <div class="hero-sub">Clic para ver novedades</div>
                    </div>
                </div>

                <!-- DEUDAS -->
                <div class="hero-card sensitive-data" onclick="openDebtModal()">
                    <img src="deudas_v2.jpg" class="hero-bg" alt="Deudas">
                    <div class="hero-overlay">
                        <div class="hero-title"><i class="fa-solid fa-file-invoice-dollar"></i> DEUDAS</div>
                        <div class="hero-sub">Clic para ver listado oficial</div>
                    </div>
                </div>
            </div>

            <!-- Link to AI Chat (kept as extra or moved? Screenshot didn't show it explicitly but good to keep) -->
            <!-- Suggest keeping it as a small link footer or removing if strict adherence. 
                  User said "ESTO SI QUIERO" showing the screenshot.
                  Screenshot doesn't show AI Chat. I'll hide it for now to match exactly. -->

            <!-- Results List Removed from Main Flow -->

        </main>
    </div>

    <!-- Modals -->

    <!-- Search Results Modal -->
    <div id="searchResultsModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Resultados</h2>
                <button class="close-btn" onclick="closeSearchResultsModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div id="venueList" class="venue-list"></div>
        </div>
    </div>

    <!-- Checklist Modal -->
    <div id="checklistModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Checklist</h2>
                <button class="close-btn" onclick="closeChecklist()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="checklist-container">
                <!-- 1. Pre-Visit Analysis -->
                <label class="check-item highlight-blue">
                    <div class="check-icon"><i class="fa-solid fa-clock-rotate-left"></i></div>
                    <div class="check-content">
                        <span class="check-title">VER COMPRAS ANTERIORES</span>
                        <span class="check-sub">Analizar historial previo</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 2. Client Data -->
                <label class="check-item">
                    <div class="check-icon"><i class="fa-solid fa-address-card"></i></div>
                    <div class="check-content">
                        <span class="check-title">DATOS DEL CLIENTE</span>
                        <span class="check-sub">Actualizar ficha</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 2b. Invoice Support -->
                <label class="check-item">
                    <div class="check-icon"><i class="fa-solid fa-file-invoice"></i></div>
                    <div class="check-content">
                        <span class="check-title">SOPORTE FACTURAS</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 3. Debt (Critical) -->
                <label class="check-item highlight-red">
                    <div class="check-icon"><i class="fa-solid fa-file-invoice-dollar"></i></div>
                    <div class="check-content">
                        <span class="check-title">DEUDA</span>
                        <span class="check-sub">Verificar pendientes</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 4. GDA Objectives -->
                <label class="check-item highlight-gold">
                    <div class="check-icon"><i class="fa-solid fa-bullseye"></i></div>
                    <div class="check-content">
                        <span class="check-title">OBJETIVO GDA</span>
                        <span class="check-sub">Volumen Fanta VR, CCZZ VR, AQ/Fuze</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 5. Upselling -->
                <label class="check-item">
                    <div class="check-icon"><i class="fa-solid fa-box-open"></i></div>
                    <div class="check-content">
                        <span class="check-title">UNA CAJITA M√ÅS</span>
                        <span class="check-sub">Lim√≥n, Agua, Gas, Sprite, Energy</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 6. Captacion -->
                <label class="check-item">
                    <div class="check-icon"><i class="fa-solid fa-user-plus"></i></div>
                    <div class="check-content">
                        <span class="check-title">CAPTACI√ìN DE CLIENTES</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 7. ACTIVAR (High Energy) -->
                <label class="check-item highlight-electric">
                    <div class="check-icon"><i class="fa-solid fa-bolt"></i></div>
                    <div class="check-content">
                        <span class="check-title">ACTIVAR!!!!!!!!!!!!!</span>
                        <span class="check-sub">¬°Energ√≠a a tope!</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 8. Audit -->
                <label class="check-item">
                    <div class="check-icon"><i class="fa-solid fa-camera"></i></div>
                    <div class="check-content">
                        <span class="check-title">EEFF, AUDIT FOTOS</span>
                    </div>
                    <input type="checkbox">
                </label>

                <!-- 9. Sustainability -->
                <label class="check-item highlight-green">
                    <div class="check-icon"><i class="fa-solid fa-leaf"></i></div>
                    <div class="check-content">
                        <span class="check-title">SOSTENIBILIDAD</span>
                        <span class="check-sub">Por el Clima</span>
                    </div>
                    <input type="checkbox">
                </label>
            </div>
        </div>
    </div>

    <!-- Focus Modal (Image View) -->
    <div id="focusModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Focos Enero</h2>
                <button class="close-btn" onclick="closeFocusModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <img src="focos_dashboard.jpg" class="modal-image-view">
        </div>
    </div>

    <!-- Detail Modal -->
    <div id="detailModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Detalle</h2>
                <button class="close-btn" onclick="closeModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>Nombre</label>
                    <input type="text" id="inputName" class="modal-input">
                </div>
                <div class="input-group">
                    <label>Direcci√≥n</label>
                    <input type="text" id="inputAddress" class="modal-input">
                </div>
                <div class="input-group">
                    <label>Tel√©fono</label>
                    <input type="tel" id="inputPhone" class="modal-input">
                </div>
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="inputEmail" class="modal-input">
                </div>
                <div class="input-group">
                    <label>Notas</label>
                    <textarea id="inputNotes" class="modal-input" rows="3"></textarea>
                </div>
                <div class="modal-actions">
                    <a id="btnCall" href="#" class="action-capsule call"><i class="fa-solid fa-phone"></i> Llamar</a>
                    <a id="btnEmail" href="#" class="action-capsule email"><i class="fa-solid fa-envelope"></i>
                        Correo</a>
                    <button onclick="saveToDebts()" class="action-capsule save"><i class="fa-solid fa-floppy-disk"></i>
                        GUARDAR</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Distribuidores Modal -->
    <div id="distribuidoresModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Distribuidores</h2>
                <button class="close-btn" onclick="closeDistribuidoresModal()"><i
                        class="fa-solid fa-xmark"></i></button>
            </div>

            <!-- HTML TABLE REPLACEMENT -->
            <table class="dist-table">
                <tr class="header-row">
                    <th>DISTRIBUIDOR</th>
                    <th>RUTA</th>
                    <th>RESPONSABLE</th>
                </tr>
                <!-- AMAGOSA -->
                <tr class="row-amagosa">
                    <td>AMAGOSA</td>
                    <td>RUTA 2QA</td>
                    <td>MANOLO</td>
                </tr>
                <tr class="row-amagosa">
                    <td></td>
                    <td>RUTA 2QB</td>
                    <td>JESUS</td> <!-- CHANGED FROM ALFONSITO -->
                </tr>
                <tr class="row-amagosa">
                    <td></td>
                    <td>RUTA 2QC</td>
                    <td>MANOLO</td>
                </tr>
                <tr class="row-amagosa">
                    <td></td>
                    <td>RUTA 2QF</td>
                    <td>GASOLINERA</td>
                </tr>
                <!-- ESCUDERO -->
                <tr class="row-escudero">
                    <td>ESCUDERO VENTA</td>
                    <td>RUTA 2QO</td>
                    <td>JOSEMARI</td>
                </tr>
                <!-- LORENZO -->
                <tr class="row-lorenzo">
                    <td>LORENZO GALLARDO</td>
                    <td>RUTA 2QP</td>
                    <td>PACO PEPE</td>
                </tr>
                <!-- MIGUEL -->
                <tr class="row-miguel">
                    <td>MIGUEL POZO</td>
                    <td>RUTA 1QK</td>
                    <td>DIEGO</td>
                </tr>
                <tr class="row-miguel">
                    <td></td>
                    <td>RUTA 1QL</td>
                    <td>JAVI</td>
                </tr>
            </table>

        </div>
    </div>

    <!-- Debt Modal -->
    <div id="debtModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Deudas y Notas</h2>
                <div id="saveIndicatorDebt"
                    style="font-size: 0.8rem; color: var(--success); margin-right: 10px; opacity: 0; transition: opacity 0.3s;">
                    <i class="fa-solid fa-check"></i> Guardado
                </div>
                <button class="close-btn" onclick="closeDebtModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <!-- Debt Image Header -->
            <img src="deudas_v2.jpg" class="modal-image-view" style="margin-bottom: 20px;"
                onclick="openZoomModal(this.src)">

            <div class="filter-bar">
                <input type="text" id="debtSearchName" placeholder="Buscar nombre..." class="filter-input">
                <input type="text" id="debtSearchDate" placeholder="Fecha..." class="filter-input">
                <div class="toggles">
                    <label><input type="checkbox" id="debtFilterGreen"> <span class="dot-green"></span></label>
                    <label><input type="checkbox" id="debtFilterRed"> <span class="dot-red"></span></label>
                </div>
            </div>
            <div id="debtPad" class="debt-pad"></div>
            <button onclick="addDebtRow()" class="add-btn"><i class="fa-solid fa-plus"></i> Nueva Nota</button>
        </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item" onclick="openCalculator(); return false;">
            <i class="fa-solid fa-calculator"></i>
            <span>Calculadora</span>
        </a>
        <a href="#" class="nav-item sensitive-data" onclick="openNotionApp(); return false;">
            <i class="fa-solid fa-pen-to-square"></i>
            <span>NOTION</span>
        </a>
        <a href="https://www.office.com/launch/excel" target="_blank" class="nav-item sensitive-data">
            <i class="fa-solid fa-table-cells"></i>
            <span>EXCEL</span>
        </a>
        <a href="mailto:adavila@ccep.com" class="nav-item">
            <i class="fa-solid fa-envelope"></i>
            <span>Correo</span>
        </a>
    </nav>

    <!-- Planes Modal (Persistent Folders/Notas) -->
    <div id="planesModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="planesTitle">Notas (Carpetas)</h2>
                <div id="saveIndicator"
                    style="font-size: 0.8rem; color: var(--success); margin-right: 10px; opacity: 0; transition: opacity 0.3s;">
                    <i class="fa-solid fa-check"></i> Guardado
                </div>
                <button class="close-btn" onclick="closePlanes()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <!-- Filter Bar for Notes -->
            <div class="filter-bar" style="margin-bottom: 15px;">
                <input type="text" id="notesSearchInput" placeholder="Buscar en notas..." class="filter-input">
                <div class="toggles">
                    <label><input type="checkbox" id="notesFilterGreen"> <span class="dot-green"></span></label>
                    <label><input type="checkbox" id="notesFilterRed"> <span class="dot-red"></span></label>
                </div>
            </div>

            <!-- Dynamic Content Area -->
            <div id="planesContent" class="debt-pad" style="min-height: 300px;"></div>

            <!-- Controls (Will be rendered by JS based on view) -->
            <div id="planesControls" style="display:flex; justify-content:center; gap:10px; margin-top:15px;"></div>
        </div>
    </div>


    <!-- Calculator Modal -->
    <div id="calculatorModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Calculadora</h2>
                <button class="close-btn" onclick="closeCalculator()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="calculator-body">
                <input type="text" id="calcDisplay" readonly value="0">
                <div class="calc-grid">
                    <button class="calc-btn op" onclick="calcClear()">C</button>
                    <button class="calc-btn op" onclick="calcAppend('/')">/</button>
                    <button class="calc-btn op" onclick="calcAppend('*')">x</button>
                    <button class="calc-btn op" onclick="calcBackspace()"><i
                            class="fa-solid fa-delete-left"></i></button>

                    <button class="calc-btn" onclick="calcAppend('7')">7</button>
                    <button class="calc-btn" onclick="calcAppend('8')">8</button>
                    <button class="calc-btn" onclick="calcAppend('9')">9</button>
                    <button class="calc-btn op" onclick="calcAppend('-')">-</button>

                    <button class="calc-btn" onclick="calcAppend('4')">4</button>
                    <button class="calc-btn" onclick="calcAppend('5')">5</button>
                    <button class="calc-btn" onclick="calcAppend('6')">6</button>
                    <button class="calc-btn op" onclick="calcAppend('+')">+</button>

                    <button class="calc-btn" onclick="calcAppend('1')">1</button>
                    <button class="calc-btn" onclick="calcAppend('2')">2</button>
                    <button class="calc-btn" onclick="calcAppend('3')">3</button>
                    <button class="calc-btn op equals" onclick="calcCalculate()">=</button>

                    <button class="calc-btn zero" onclick="calcAppend('0')">0</button>
                    <button class="calc-btn" onclick="calcAppend('.')">.</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Debug Console Overlay -->


    <div id="transitionOverlay" class="transition-overlay"></div>

    <!-- Hidden Backup Input for Restore Functionality -->
    <input type="file" id="backupInput" style="display:none;" accept=".json" onchange="importBackup(this)">

    <!-- Settings Modal (New) -->
    <div id="settingsModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>‚öôÔ∏è Configuraci√≥n Notion</h2>
                <button class="close-btn" onclick="closeSettingsModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div style="margin-bottom: 20px;">
                    <label style="display:block; margin-bottom:8px; font-weight:bold; color:var(--text-color);">üîë
                        Internal Integration Secret</label>
                    <input type="password" id="settingNotionKey" placeholder="secret_..."
                        style="width:100%; padding:10px; border-radius:8px; border:1px solid #444; background:#222; color:white;">
                    <p style="font-size:12px; color:#aaa; margin-top:5px;">Empieza por "secret_". Cons√≠guelo en <a
                            href="https://www.notion.so/my-integrations" target="_blank"
                            style="color:#3b82f6;">notion.so/my-integrations</a></p>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display:block; margin-bottom:8px; font-weight:bold; color:var(--text-color);">üóÑÔ∏è
                        Database ID</label>
                    <input type="text" id="settingNotionDb" placeholder="32 caracteres hex..."
                        style="width:100%; padding:10px; border-radius:8px; border:1px solid #444; background:#222; color:white;">
                    <p style="font-size:12px; color:#aaa; margin-top:5px;">El ID de la base de datos (normalmente en la
                        URL).</p>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display:block; margin-bottom:8px; font-weight:bold; color:var(--text-color);">üì± Deep
                        Link (App Notion)</label>
                    <input type="text" id="settingNotionAppUrl" placeholder="notion://..."
                        style="width:100%; padding:10px; border-radius:8px; border:1px solid #444; background:#222; color:white;">
                    <p style="font-size:12px; color:#aaa; margin-top:5px;">Pega el enlace de tu p√°gina y cambia
                        <b>https</b> por <b>notion</b>.
                    </p>
                </div>

                <div style="text-align: right;">
                    <button onclick="saveSettings()"
                        style="background:var(--primary-gradient); border:none; padding:10px 20px; border-radius:8px; color:white; font-weight:bold; cursor:pointer;">üíæ
                        Guardar y Probar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app_v3.js"></script>
    <script>
        // Simple Date Script
        function updateDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            // Check if element exists before setting (in case removed)
            const dateEl = document.getElementById('fecha');
            if (dateEl) dateEl.textContent = now.toLocaleDateString('es-ES', options);
        }
        updateDate();

        // Screen Transition Script
        document.addEventListener('DOMContentLoaded', () => {
            const overlay = document.getElementById('transitionOverlay');
            // Intercept links to catalogo.html
            const catalogLinks = document.querySelectorAll('a[href="catalogo.html"]');

            catalogLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (overlay) {
                        overlay.classList.add('active-slide-up');
                        // Wait for animation then navigate
                        setTimeout(() => {
                            window.location.href = 'catalogo.html';
                        }, 600);
                    } else {
                        window.location.href = 'catalogo.html';
                    }
                });
            });
        });

        function openCatalogWithNote() {
            const activeId = localStorage.getItem('activeNoteId');
            if (activeId) {
                window.location.href = `catalogo.html?nid=${activeId}`;
            } else {
                window.location.href = 'catalogo.html';
            }
        }
    </script>
</body>

</html>
<script>
    function toggleShowroom() {
        document.body.classList.toggle('showroom-mode');
        const btn = document.querySelector('.showroom-toggle i');
        if (document.body.classList.contains('showroom-mode')) {
            btn.classList.remove('fa-eye');
            btn.classList.add('fa-eye-slash');
        } else {
            btn.classList.remove('fa-eye-slash');
            btn.classList.add('fa-eye');
        }
    }
</script>